<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Gaussian Splatting 360 Recorder – Spark</title>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #000;
        display: flex;
        flex-direction: column;
      }

      #controls {
        padding: 8px 12px;
        background: #111;
        color: #eee;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-size: 14px;
        flex-shrink: 0;
      }

      #renderCanvas {
        flex: 1;
        width: 100%;
        height: 100%;
        display: block;
        image-rendering: pixelated;
        background: #000;
      }

      button {
        padding: 6px 12px;
        font-size: 14px;
        cursor: pointer;
      }
    </style>

    <!-- importmap, как в index.html -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.178.0/three.module.js",
          "@sparkjsdev/spark": "https://sparkjs.dev/releases/spark/0.1.10/spark.module.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="controls">
      <button id="startBtn">Start 360 recording</button>
      <span style="margin-left: 12px;">
        Дождитесь загрузки сцены, затем нажмите «Start 360 recording». Видео с двумя кругами сохранится автоматически.
      </span>
    </div>

    <canvas id="renderCanvas"></canvas>

    <script type="module">
      import { startRender } from "./record_main.js";

      const PLY_PATH = "./ConferenceHall.ply";
      const CAMERA_PATH = "./camera_path.json";

      document.getElementById("startBtn").addEventListener("click", () => {
        startRender(PLY_PATH, CAMERA_PATH)
          .catch((err) => {
            console.error(err);
            alert("Ошибка при запуске рендера: " + err.message);
          });
      });
    </script>
  </body>
</html>
